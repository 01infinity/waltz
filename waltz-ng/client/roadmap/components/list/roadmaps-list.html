
<div ng-repeat="roadmap in $ctrl.roadmaps">
    <waltz-sub-section>
        <content>
            <div style="padding: 12px">
                    <!-- TITLE -->
                <h4>
                    <span ng-bind="roadmap.name"></span>
                    <small>
                        ( <span ng-bind="roadmap.columnType.name"></span>
                        /
                        <span ng-bind="roadmap.rowType.name"></span> )
                    </small>
                </h4>

                <!-- DESC -->
                <label>Description:</label>
                <waltz-markdown text="roadmap.description"></waltz-markdown>

                <br>

                <!-- SCENARIOS -->
                <table class="small table table-condensed">
                    <colgroup>
                        <col width="40%">
                        <col width="10%">
                        <col width="10%">
                        <col width="20%">
                        <col width="20%">
                    </colgroup>
                    <thead>
                    <tr>
                        <th>Scenario Name</th>
                        <th>Target Date</th>
                        <th>Status</th>
                        <th>Operations</th>
                        <th>Last modified</th>
                    </tr>
                    </thead>
                    <tr ng-repeat="scenario in $ctrl.scenariosByRoadmapId[roadmap.id] track by scenario.id"
                        class="waltz-visibility-parent">
                        <td>
                            <span uib-popover-template="'wrl-popover.html'"
                                  popover-trigger="mouseenter"
                                  popover-enable="scenario.description"
                                  popover-popup-delay="300"
                                  popover-append-to-body="true">
                                <a ng-click="$ctrl.onSelectScenario(scenario, roadmap)"
                                   class="clickable">
                                    <span ng-bind="scenario.name"></span>
                                </a>
                            </span>
                        </td>
                        <td>
                            <span ng-bind="scenario.targetDate">
                            </span>
                        </td>
                        <td>
                            <span class="small"
                                  ng-bind="scenario.status | toDisplayName:'releaseLifecycleStatus'">
                            </span>
                        </td>
                        <td>
                            <span class="waltz-visibility-child-30">
                                <a ng-click="$ctrl.onCloneScenario(scenario)"
                                   class="clickable">
                                    Clone
                                </a>
                            </span>
                        </td>
                        <td>
                            <waltz-last-updated entity="scenario"
                                                show-label="false">
                            </waltz-last-updated>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3"></td>
                        <td colspan="2">
                            <a ng-click="$ctrl.onAddScenario(roadmap)"
                               class="clickable">
                                <waltz-icon name="plus">
                                </waltz-icon>
                                Add new scenario
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </content>
    </waltz-sub-section>

    <div>
        <hr>

        <a ng-click="$ctrl.onAddRoadmap()"
           class="clickable">
            <waltz-icon name="plus">
            </waltz-icon>
            Add new roadmap
        </a>
    </div>
</div>



<script type="text/ng-template"
        id="wrl-popover.html">
    <div class="small">
        <strong ng-bind="scenario.name"></strong>
        <hr>
        <waltz-markdown text="scenario.description"></waltz-markdown>
    </div>
</script>