<div>
    <div class="waltz-tabs">
        <input type="radio"
               ng-repeat-start="tab in $ctrl.tabs"
               ng-model="$ctrl.visibility.tab"
               ng-value="tab.category.id"
               ng-disabled="tab.treeData.length === 0"
               name="measurable_ratings_browser"
               id="{{ tab.category.id + '_' + $id}}">
        <label for="{{ tab.category.id + '_' + $id}}"
               ng-repeat-end>
            <div ng-bind="tab.category.name"></div>
        </label>

        <div ng-repeat="tab in $ctrl.tabs track by tab.category.id"
             ng-class="{ 'wt-active': tab.category.id == $ctrl.visibility.tab }"
             class="wt-tab">
            <br>
            <div ng-class="$ctrl.containerClass">
                <treecontrol class="tree-light"
                             tree-model="tab.treeData"
                             expanded-nodes="tab.expandedNodes"
                             options="$ctrl.treeOptions"
                             on-selection="$ctrl.onSelect(node)"
                             order-by="'-name'">
                    <span style="display: inline-block; width: 90%; padding: 0; margin: 0;"
                          ng-class="{ 'text-muted': $ctrl.ratingsMap[node.id].total.total == 0 }"
                          class="no-overflow waltz-visibility-parent">
                        <span ng-bind="node.name"
                              uib-popover-template="'wmrb/measurable-popover.html'"
                              popover-trigger="mouseenter"
                              popover-append-to-body="true"
                              popover-placement="right"
                              popover-enable="node.description.length > 0"
                              class="waltz-visibility-child-90"
                              ng-class="{ 'italics' : ! node.concrete }">
                        </span>
                        <waltz-rag-line class='waltz-visibility-child-50'
                                        scores="$ctrl.ratingsMap[node.id].compound"
                                        rating-scheme="$ctrl.ratingSchemesById[tab.category.ratingSchemeId]"
                                        style="padding: 0;"
                                        range="[0, $ctrl.maxTotal]">
                        </waltz-rag-line>
                    </span>
                </treecontrol>
            </div>
        </div>

    </div>
</div>


<!-- DESCRIPTION POPUP -->
<script type="text/ng-template"
        id="wmrb/measurable-popover.html">
    <waltz-markdown text="node.description"></waltz-markdown>
</script>