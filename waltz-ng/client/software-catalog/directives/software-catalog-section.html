<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
    <waltz-section name="Technologies" id="technology">

        <div ng-if="ctrl.catalog.packages.length > 0">
            <waltz-section-actions>
                <input type="search" placeholder="Search"
                       style="border-radius: 6px; padding-left: 3px"
                       ng-model="ctrl.qry">
            </waltz-section-actions>

            <uib-tabset>
                <uib-tab heading="Overview">
                    <waltz-simple-software-usage-pies packages="ctrl.filteredPackages"
                                                      usages="ctrl.catalog.usages">
                    </waltz-simple-software-usage-pies>
                </uib-tab>
                <uib-tab heading="Detail">
                    <div class="waltz-scroll-region" style="height: 300px">
                        <waltz-simple-software-usage-list packages="ctrl.filteredPackages"
                                                          usages="ctrl.catalog.usages">
                        </waltz-simple-software-usage-list>
                    </div>
                </uib-tab>

            </uib-tabset>



            <div class="waltz-paragraph text-muted pull-right small">
                <waltz-icon name="info-circle"></waltz-icon>
                Associated software packages have been sourced from:
                <ul class="list-inline" style="display: inline-block">
                    <li ng-repeat="(source, usages) in ctrl.usages">
                        {{ source }}
                        <span ng-if="!$last">,</span>
                    </li>
                </ul>
            </div>

        </div>

        <waltz-no-data ng-if="ctrl.catalog.packages.length == 0 || ! ctrl.catalog">
            <message>
                <strong>No associated software packages</strong>
            </message>
        </waltz-no-data>

    </waltz-section>
</div>
