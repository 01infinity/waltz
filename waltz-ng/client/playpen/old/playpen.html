<!--
  ~  Waltz
  ~ Copyright (c) David Watkins. All rights reserved.
  ~ The use and distribution terms for this software are covered by the
  ~ Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)
  ~ which can be found in the file epl-v10.html at the root of this distribution.
  ~ By using this software in any fashion, you are agreeing to be bound by
  ~ the terms of this license.
  ~ You must not remove this notice, or any other, from this software.
  ~
  -->
<div>

    <waltz-page-header name="{{ ctrl.tag }}" small="Upload" icon="cloud-upload">
        <ol class="waltz-breadcrumbs">
            <li><a ui-sref="main">Home</a></li>
            <li>Tag Explorer</li>
        </ol>
    </waltz-page-header>

    <style>

    </style>
    <waltz-section name="File Upload">
        <waltz-file-select on-select="ctrl.fileSelected" multiple></waltz-file-select>

    </waltz-section>

    <waltz-section name="Preview" ng-if="ctrl.lines.length > 0">
        <div class="sample-data">
            <ul class="list-unstyled">
                <li ng-repeat="line in ctrl.lines">
                    <span class="label label-info">
                        {{ line.idx }}
                    </span>
                    <span class="sample-line">
                        {{ line.line }}
                    </span>
                </li>
            </ul>
        </div>

        <div>
            Here's a preview of the data in the file you selected.  If this looks correct then
            use the button below to analyse the file contents.  We'll try and determine the header
            , if any, and report back with our results.
            <button ng-click="ctrl.analyse()"
                    class="btn btn-success btn-sm">
                Analyse
            </button>

            <div ng-if="ctrl.mode='ANALYSING'">
                <waltz-icon name="spinner" spin="true">
                   Analysing...
                </waltz-icon>
            </div>

        </div>
    </waltz-section>

</div>
