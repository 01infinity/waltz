<div class="pie-table">
    <div ng-switch="$ctrl.renderMode">
        <div ng-switch-when="frameless">
            <h4>
                <span ng-bind="$ctrl.title"></span>
            </h4>
            <p class="help-text">
                <waltz-markdown text="$ctrl.description"></waltz-markdown>
            </p>

            <div ng-include="'wpt-pie-and-table'"></div>
        </div>
        <div ng-switch-default>
            <waltz-basic-info-tile name="{{ $ctrl.title }}"
                                   sub-name="{{ $ctrl.subTitle }}"
                                   description="{{ $ctrl.description }}"
                                   icon="{{ $ctrl.icon }}">
                <div ng-include="'wpt-pie-and-table'"></div>
            </waltz-basic-info-tile>
        </div>
    </div>



</div>


<script type="text/ng-template"
        id="wpt-pie-and-table">
    <div style="text-align: center">
        <waltz-pie data="$ctrl.pieData"
                   style="display: inline-block; vertical-align: top; padding-right: 24px;"
                   selected-segment-key="$ctrl.selectedSegmentKey"
                   config="$ctrl.config">
        </waltz-pie>
    </div>

    <div>
        <waltz-pie-segment-table data="$ctrl.pieData"
                                 style="display: inline-block"
                                 selected-segment-key="$ctrl.selectedSegmentKey"
                                 config="$ctrl.config">
        </waltz-pie-segment-table>
    </div>
</script>