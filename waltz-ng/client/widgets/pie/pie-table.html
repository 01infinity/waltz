<!--
  ~ Waltz - Enterprise Architecture
  ~ Copyright (C) 2016, 2017, 2018, 2019 Waltz open source project
  ~ See README.md for more information
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="pie-table">
    <div ng-switch="$ctrl.renderMode">
        <div ng-switch-when="frameless">
            <h4>
                <span ng-bind="$ctrl.name"></span>
            </h4>
            <p class="help-text">
                <waltz-markdown text="$ctrl.description"></waltz-markdown>
            </p>

            <div ng-include="'wpt-pie-and-table'"></div>
        </div>
        <div ng-switch-default>
            <waltz-basic-info-tile name="{{ $ctrl.name }}"
                                   sub-name="{{ $ctrl.subName }}"
                                   description="{{ $ctrl.description }}"
                                   icon="{{ $ctrl.icon }}">
                <div ng-include="'wpt-pie-and-table'"></div>
            </waltz-basic-info-tile>
        </div>
    </div>



</div>


<script type="text/ng-template"
        id="wpt-pie-and-table">
    <div align="center">
        <div>
            <waltz-pie data="$ctrl.pieData"
                       style="display: inline-block; vertical-align: top; padding-right: 24px;"
                       selected-segment-key="$ctrl.selectedSegmentKey"
                       config="$ctrl.pieConfig">
            </waltz-pie>
        </div>
        <div>
            <waltz-pie-segment-table data="$ctrl.tableData"
                                     style="display: inline-block"
                                     selected-segment-key="$ctrl.selectedSegmentKey"
                                     config="$ctrl.tableConfig">
            </waltz-pie-segment-table>
        </div>
    </div>
</script>