<div>
    <!-- HEADER -->
    <waltz-page-header name="{{ ctrl.report.name }}"
                       small="Lineage Report"
                       icon="qrcode">
        <ol class="waltz-breadcrumbs">
            <li><a ui-sref="main">Home</a></li>
            <li>
                Data Lineage Reports
            </li>
            <li>Lineage edit</li>
        </ol>
    </waltz-page-header>


    <!-- SUMMARY -->
    <div class="waltz-page-summary waltz-page-summary-attach">
        <waltz-section-actions>
            <a waltz-has-role="LOGICAL_DATA_FLOW_EDITOR"
               ui-sref='main.lineage-report.edit ({id: ctrl.report.id})'
               class="btn btn-xs btn-primary">
                Edit
            </a>
        </waltz-section-actions>


        <div class="row">
            <div class="col-sm-2 waltz-display-field-label">
                Report Name
            </div>
            <div class="col-sm-10">
                <span ng-bind="ctrl.report.name"></span>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2 waltz-display-field-label">
                Description
            </div>
            <div class="col-sm-10">
                <span ng-bind="ctrl.report.description"></span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-sm-3">
                <strong>
                    <waltz-icon name="info-circle"></waltz-icon>
                    This report describes the lineage for physical data specification:
                    <br>
                    <a ui-sref="main.physical-specification.view ({ id: ctrl.specification.id })"
                       ng-bind="ctrl.specification.name">
                    </a>
                </strong>
            </div>
            <div class="col-sm-9">
                <div style="border: 1px solid #f4f4f4; border-radius: 3px; padding: 12px">
                    <waltz-physical-specification-overview owning-app="ctrl.application"
                                                           organisational-unit="ctrl.organisationalUnit"
                                                           specification="ctrl.specification">
                    </waltz-physical-specification-overview>
                </div>

            </div>
        </div>
    </div>

    <br>


    <waltz-section name="Flow">
        <waltz-data-flow-diagram data="{ flows: ctrl.logicalFlows, entities: ctrl.apps }"
                                 tweakers="ctrl.graphTweakers">
        </waltz-data-flow-diagram>

        <hr>

        <waltz-lineage-flow-tabgroup specification="ctrl.specification"
                                     lineage-data="{
                                        applications: ctrl.apps,
                                        logicalFlows: ctrl.logicalFlows,
                                        physicalFlows: ctrl.physicalFlows,
                                        specifications: ctrl.specifications
                                     }">
        </waltz-lineage-flow-tabgroup>


    </waltz-section>


    <!-- BOOKMARKS -->
    <waltz-bookmarks-section bookmarks="ctrl.bookmarks"
                             entity-id="{{ ctrl.report.id }}"
                             kind="LINEAGE_REPORT"
                             parent-name="{{ ctrl.report.name }}">
    </waltz-bookmarks-section>


    <!-- DEBUG -->
    <waltz-section name="stuff" ng-show="false">
        <div class="row">
            <div class="col-md-2">
                <h4>Report / Specification / App</h4>
                <pre ng-bind="ctrl.report | json"></pre>
                <pre ng-bind="ctrl.specification | json"></pre>
                <pre ng-bind="ctrl.application | json"></pre>
            </div>
            <div class="col-md-2">
                <h4>specifications</h4>
                <pre ng-bind="ctrl.specifications | json"></pre>
            </div>
            <div class="col-md-2">
                <h4>Apps</h4>
                <pre ng-bind="ctrl.apps | json"></pre>
            </div>
            <div class="col-md-2">
                <h4>Phys Flows</h4>
                <pre ng-bind="ctrl.physicalFlows | json"></pre>
            </div>
            <div class="col-md-2">
                <h4>Logical Flows</h4>
                <pre ng-bind="ctrl.logicalFlows | json"></pre>
            </div>
            <div class="col-md-2">
                <h4>Combined</h4>
                <pre ng-bind="ctrl.flowData | json"></pre>
            </div>
        </div>
    </waltz-section>
</div>