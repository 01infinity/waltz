<div class="waltz-page-summary waltz-page-summary-attach">
    <div class="row">
        <div class="col-sm-12 text-muted">
            <waltz-markdown text="$ctrl.measurable.description">
            </waltz-markdown>
            <br/>
            <br/>
            <waltz-entity-named-notes-panel parent-entity-ref="$ctrl.entityRef">
            </waltz-entity-named-notes-panel>
            <hr/>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-4">
            <waltz-apps-by-investment-pie applications="$ctrl.applications"
                                          size="70">
            </waltz-apps-by-investment-pie>
        </div>

        <div class="col-sm-4">
            <waltz-apps-by-lifecycle-phase-pie applications="$ctrl.applications"
                                               size="70">
            </waltz-apps-by-lifecycle-phase-pie>
        </div>

        <div class="col-sm-4">
            <waltz-basic-info-tile waltz-jump-to="logical-flows-section"
                                   icon="random"
                                   name="Logical Data Flows">
                <waltz-flow-cloud-diagram
                    width="230"
                    height="180"
                    stats="$ctrl.logicalFlows">
                </waltz-flow-cloud-diagram>
            </waltz-basic-info-tile>
        </div>
    </div>

    <div class="row">

        <!-- PORTFOLIO COST -->
        <div class="col-sm-4">
            <waltz-basic-info-tile name="Portfolio Cost"
                                   description="Cumulative value of infra and app dev costs"
                                   waltz-jump-to="costs-section"
                                   icon="money">
                        <span style="font-size: x-large;"
                              ng-bind="$ctrl.portfolioCostStr">
                        </span>
            </waltz-basic-info-tile>
        </div>


        <!-- COMPLEXITY -->
        <div class="col-sm-4">
            <waltz-basic-info-tile name="Complexity"
                                   description="Derived from functions, connections and servers"
                                   class="clickable"
                                   waltz-jump-to="complexity-section"
                                   icon="rocket">
                <div style="font-size: x-large;">
                    &Sigma;
                    <span ng-bind="$ctrl.complexitySummary.cumulativeScore | toFixed:1"></span>
                </div>

                <div class="small text-muted">
                    <span ng-bind="$ctrl.complexitySummary.averageScore | toFixed:2 "></span>
                    per app
                </div>
            </waltz-basic-info-tile>
        </div>


        <!-- SERVERS -->
        <div class="col-sm-4">
            <waltz-basic-info-tile name="Servers"
                                   description="Number of servers supporting this group"
                                   icon="server">
                <div>
                    <div style="font-size: x-large;">
                        #
                        <span ng-bind="$ctrl.enrichedServerStats.total">
                            </span>
                    </div>
                    <div class="small text-muted">
                        <span ng-bind="$ctrl.enrichedServerStats.virtualPercentage">
                        </span>
                        % virtual
                    </div>
                </div>
            </waltz-basic-info-tile>
        </div>

    </div>

    <hr>

    <!-- NAV -->
    <div class="row"
         style="padding: 1em">
        <div class="col-md-8">
            <waltz-immediate-hierarchy-navigator parents="$ctrl.parentRefs"
                                                 children="$ctrl.childRefs">
            </waltz-immediate-hierarchy-navigator>
        </div>
    </div>

</div>