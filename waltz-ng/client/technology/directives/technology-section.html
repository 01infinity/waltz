<div>
    <waltz-section name="Technologies" id="technology">

        <div ng-if="ctrl.hasAnyData()">
            <waltz-section-actions>
                <input type="search"
                       placeholder="Search"
                       style="border-radius: 6px; padding-left: 3px"
                       ng-model="ctrl.qry">
            </waltz-section-actions>

            <uib-tabset>

                <uib-tab heading="Overview">

                    <div ng-if="ctrl.softwareCatalog.packages.length > 0">
                        <h4 class="text-center">
                            <waltz-icon name="leaf"></waltz-icon>
                            Software Packages
                        </h4>
                        <waltz-simple-software-usage-pies packages="ctrl.filteredSoftwarePackages"
                                                          usages="ctrl.catalog.softwareUsages">
                        </waltz-simple-software-usage-pies>
                    </div>

                    <div style="border-top: 2px dotted #ddd; margin-top: 4px; margin-bottom: 8px;"
                         ng-if="ctrl.servers.length > 0">
                        <h4 class="text-center">
                            <waltz-icon name="server"></waltz-icon>
                            Servers
                        </h4>
                        <waltz-server-pies servers="ctrl.filteredServers">
                        </waltz-server-pies>
                    </div>

                    <div style="border-top: 2px dotted #ddd; margin-top: 4px; margin-bottom: 8px;"
                         ng-if="ctrl.databases.length > 0">
                        <h4 class="text-center">
                            <waltz-icon name="database"></waltz-icon>
                            Databases
                        </h4>
                        <waltz-database-pies databases="ctrl.filteredDatabases">
                        </waltz-database-pies>
                    </div>

                </uib-tab>

                <uib-tab heading="Software Packages"
                         disable="ctrl.softwareCatalog.packages.length == 0">
                    <div class="waltz-scroll-region" style="height: 300px">
                        <waltz-simple-software-usage-list packages="ctrl.filteredSoftwarePackages"
                                                          usages="ctrl.catalog.softwareUsages">
                        </waltz-simple-software-usage-list>
                    </div>
                </uib-tab>

                <uib-tab heading="Servers"
                         select="showServerDetail = true"
                         disable="ctrl.servers.length == 0">
                    <div ng-if="showServerDetail">
                        <br>
                        <div style="font-size: smaller; height: 300px"
                             ui-grid="ctrl.serverGridOptions">
                        </div>
                    </div>
                </uib-tab>

                <uib-tab heading="Databases"
                         select="showDatabaseDetail = true"
                         disable="ctrl.databases.length == 0">
                    <div ng-if="showDatabaseDetail">
                        <br>
                        <div style="font-size: smaller; height: 300px"
                             ui-grid="ctrl.databaseGridOptions">
                        </div>
                    </div>
                </uib-tab>
            </uib-tabset>



            <div class="waltz-paragraph text-muted pull-right small">
                <waltz-icon name="info-circle"></waltz-icon>
                Associated software packages have been sourced from:
                <ul class="list-inline"
                    style="display: inline-block">
                    <li ng-repeat="(source, usages) in ctrl.softwareUsages">
                        {{ source }}
                        <span ng-if="!$last">,</span>
                    </li>
                </ul>
            </div>

        </div>

        <div ng-if="! ctrl.hasAnyData()">
            <div class="alert alert-warning">
                <strong>No associated technology found</strong>
            </div>
        </div>

    </waltz-section>
</div>
