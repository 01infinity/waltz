<div>
    <waltz-page-header name="{{ ctrl.statistic.definition.name }}"
                       small="Indicator"
                       icon="pie-chart">
        <ol class="waltz-breadcrumbs">
            <li><a ui-sref="main">Home</a></li>
            <li>
                <a ng-click="ctrl.goToParent()"
                   class="clickable"
                   ng-bind="ctrl.selectedNavItem.name">
                </a>
            </li>
            <li>Indicators</li>
            <li ng-bind="ctrl.statistic.definition.name"></li>
        </ol>
    </waltz-page-header>

    <div class="waltz-page-summary waltz-page-summary-attach">

        <div class="row">
            <div class="col-sm-8"
                 style="border-right: 2px solid #eee">
                <!-- CURRENT -->
                <div class="row">
                    <div class="col-md-12">
                        <waltz-entity-statistic-detail-panel definition='ctrl.statistic.definition'
                                                             summary="ctrl.statistic.summary"
                                                             values="ctrl.statistic.values"
                                                             applications="ctrl.applications">
                        </waltz-entity-statistic-detail-panel>
                    </div>
                </div>

                <!-- HISTORY -->
                <div class="row" ng-if="ctrl.history">
                    <div class="col-md-12">
                        <hr>
                        <h3>History</h3>

                        <waltz-entity-statistic-history-panel history="ctrl.history"
                                                              duration="ctrl.duration"
                                                              on-change-duration="ctrl.onChangeDuration"
                                                              definition='ctrl.statistic.definition'>
                        </waltz-entity-statistic-history-panel>
                    </div>
                </div>

                <!-- RELATED -->
                <div class="row">
                    <div class="col-md-12"
                         ng-if="ctrl.visibility.related">
                        <hr>
                        <h3>Related Indicators</h3>
                        <waltz-related-entity-statistics-summaries definitions='ctrl.relatedDefinitions'
                                                                   parent-ref="ctrl.parentRef"
                                                                   summaries="ctrl.summaries">
                        </waltz-related-entity-statistics-summaries>
                    </div>
                </div>
            </div>

            <!-- NAV -->
            <div class="col-sm-4">
                <h4>
                    <waltz-icon fixed-width="true"
                                size="lg"
                                name="{{ ctrl.parentRef.kind | toIconName:'entity' }}">
                    </waltz-icon>
                    <span ng-bind="ctrl.parentRef.kind | toDisplayName:'entity'"></span>
                    <small>Selector</small>
                </h4>
                <waltz-entity-hierarchy-navigator model="ctrl.navItems"
                                                  selected-node="ctrl.selectedNavItem"
                                                  on-select="ctrl.onSelectNavItem">
                </waltz-entity-hierarchy-navigator>

                <p class="waltz-paragraph small text-muted"
                   style="padding-top: 12px">
                    Use the navigational tree above to select a vantage point to view
                    this indicator from.
                </p>

                <hr>

                <h4>
                    <waltz-icon fixed-width="true"
                                size="lg"
                                name="{{ 'ENTITY_STATISTIC' | toIconName:'entity' }}">
                    </waltz-icon>
                    <span>Indicators
                        <small>Selector</small>
                    </span>
                </h4>
                <waltz-entity-statistic-tree definitions="ctrl.allDefinitions"
                                             on-selection="ctrl.onSelectDefinition"
                                             current-definition-id="ctrl.statistic.definition.id">
                </waltz-entity-statistic-tree>

                <p class="waltz-paragraph small text-muted"
                   style="padding-top: 12px">
                    Use the tree above to switch to a different indicator.
                </p>

            </div>

        </div>

    </div>


    <br>

    <!-- BOOKMARKS -->
    <waltz-bookmarks-section bookmarks="ctrl.bookmarks"
                             entity-id="{{ ctrl.statistic.definition.id }}"
                             kind="ENTITY_STATISTIC"
                             parent-name="{{ ctrl.statistic.definition.name }}"
                             source-data-ratings="ctrl.sourceDataRatings">
    </waltz-bookmarks-section>

</div>
