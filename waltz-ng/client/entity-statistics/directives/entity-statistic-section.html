<div>
    <waltz-section name="{{ctrl.name}}"
                   icon="pie-chart">

        <div class="row col-sm-12 value"
             ng-if="ctrl.entityStatisticsGrouped.length > 0">

            <table class="table table-condensed"
                   style="border-collapse: separate;">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Outcome</th>
                        <th>Reason</th>
                        <th>Last Refresh</th>
                    </tr>
                </thead>

                <tbody ng-repeat="(group, stats) in ctrl.entityStatisticsGrouped" class="waltz-entity-statistic">
                    <tr class="category">
                        <td colspan="5">
                            <waltz-icon name="{{ stats.key | toIconName:'entityStatistic' }}"></waltz-icon>
                            <strong class="small" ng-bind="stats.key | toDisplayName:'entityStatistic'"></strong>
                        </td>
                    </tr>
                    <tr ng-repeat="stat in stats.values" class="small text-muted">
                        <td></td>
                        <td>
                            <span ng-bind="stat.definition.name"
                                  uib-tooltip="{{stat.definition.description}}">
                            </span>
                        </td>
                        <td ng-switch="stat.definition.type">
                            <waltz-entity-statistic-boolean-renderer statistic="stat.definition"
                                                                     value="stat.value"
                                                                     ng-switch-when="BOOLEAN">
                            </waltz-entity-statistic-boolean-renderer>

                            <waltz-entity-statistic-percentage-renderer statistic="stat.definition"
                                                                        value="stat.value"
                                                                        ng-switch-when="PERCENTAGE">
                            </waltz-entity-statistic-percentage-renderer>

                            <waltz-entity-statistic-numeric-renderer statistic="stat.definition"
                                                                     value="stat.value"
                                                                     ng-switch-when="NUMERIC">
                            </waltz-entity-statistic-numeric-renderer>
                            <kbd ng-switch-default>{{stat.value.outcome}}</kbd>
                        </td>
                        <td>
                            <span ng-bind="stat.value.reason">
                            </span>
                        </td>
                        <td>
                            <waltz-from-now timestamp="stat.value.createdAt">
                            </waltz-from-now>
                        </td>
                    </tr>
                </tbody>

            </table>

        </div>
        <div class="alert alert-warning" ng-if="ctrl.entityStatisticsGrouped.length == 0">
            <strong>
                No Indicators
            </strong>
            for this application.
        </div>

    </waltz-section>
</div>
