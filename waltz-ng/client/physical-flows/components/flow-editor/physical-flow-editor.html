<div class="waltz-physical-flow-editor">
    <table class="waltz-field-table"
           style="width: 100%">
        <colgroup>
            <col width="30%">
            <col width="70%">
        </colgroup>
        <tr>
            <td class="wft-label">
                <label>Criticality</label>
            </td>
            <td>
                <waltz-editable-enum initial-val="$ctrl.physicalFlow.criticality"
                                     enum-kind="physicalFlowCriticality"
                                     on-save="$ctrl.onSaveCriticality"
                                     edit-role="LOGICAL_DATA_FLOW_EDITOR">
                </waltz-editable-enum>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>Transport</label>
            </td>
            <td>
                <waltz-editable-enum initial-val="$ctrl.physicalFlow.transport"
                                     enum-kind="TransportKind"
                                     on-save="$ctrl.onSaveTransport"
                                     edit-role="LOGICAL_DATA_FLOW_EDITOR">
                </waltz-editable-enum>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>Frequency</label>
            </td>
            <td>
                <waltz-editable-enum initial-val="$ctrl.physicalFlow.frequency"
                                     enum-kind="frequencyKind"
                                     on-save="$ctrl.onSaveFrequency"
                                     edit-role="LOGICAL_DATA_FLOW_EDITOR">
                </waltz-editable-enum>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>Basis Offset</label>
            </td>
            <td>
                <waltz-editable-field on-save="$ctrl.onSaveBasisOffset"
                                      field-type="text"
                                      initial-val="$ctrl.physicalFlow.basisOffset">
                </waltz-editable-field>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>Description</label>
            </td>
            <td>
                <waltz-editable-field on-save="$ctrl.onSaveDescription"
                                      field-type="textarea"
                                      initial-val="$ctrl.physicalFlow.description">
                </waltz-editable-field>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>ExternalId</label>
            </td>
            <td>
                <span class="text-muted" ng-bind="$ctrl.physicalFlow.externalId"></span>
            </td>
        </tr>
        <tr>
            <td class="wft-label">
                <label>Additional Identifiers</label>
            </td>
            <td>
                <span class='waltz-clickable-definition'
                      popover-trigger="focus"
                      tabindex="99"
                      [autoClose]="'outside'"
                      popover-placement="right"
                      popover-animation="true"
                      popover-title="External Identifiers"
                      uib-popover-template="'wpfe-popup-externalIdentifiers.html'">
                    <a class="btn btn-xs waltz-visibility-child-30">
                        <waltz-icon name="pencil"></waltz-icon>
                        Edit
                    </a>
                </span>
            </td>
        </tr>
    </table>
</div>

<!--  TEMPLATES -->
<script type='text/ng-template' id='wpfe-popup-externalIdentifiers.html'>
    <div>
        <table class="table small">
            <thead>
                <tr>
                    <th>External Id</th>
                    <th>Provenance</th>
                    <th></th>
                </tr>
            </thead>
            <tr ng-repeat="item in $ctrl.externalIdentifiers">
                <td>
                    <span ng-bind="item.externalId"></span>
                </td>
                <td>
                    <span ng-bind="item.system"></span>
                </td>
                <td>
                    <span ng-click="$ctrl.removeExternalId(item.externalId)"
                          popover-title="Delete">
                        <waltz-icon name="trash"></waltz-icon>
                    </span>
                </td>
            </tr>
        </table>

        <div class="text-muted small">
            Remove the external id for this physical flow
        </div>
    </div>
</script>