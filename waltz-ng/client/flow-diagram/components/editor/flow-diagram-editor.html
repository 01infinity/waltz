<div class="waltz-flow-diagram-editor">

    <!-- LOGICAL FLOW POPUP -->
    <div class="wfde-pop waltz-fade-if"
         ng-if="$ctrl.visibility.logicalFlowPopup">
        <waltz-flow-diagram-logical-flow-popup on-dismiss="$ctrl.onDismissPopup"
                                               logical-flows="$ctrl.popup.logicalFlows"
                                               node="$ctrl.popup.node"
                                               existing-entities="$ctrl.popup.existingEntities"
                                               is-upstream="$ctrl.popup.isUpstream"
                                               command-processor="$ctrl.issueCommands">
        </waltz-flow-diagram-logical-flow-popup>
    </div>


    <!-- PHYSICAL FLOW POPUP -->
    <div class="wfde-pop waltz-fade-if"
         ng-if="$ctrl.visibility.physicalFlowPopup">
        <waltz-flow-diagram-physical-flow-popup on-dismiss="$ctrl.onDismissPopup"
                                                logical-flow="$ctrl.popup.logicalFlow"
                                                physical-flows="$ctrl.popup.physicalFlows"
                                                physical-specifications="$ctrl.popup.physicalSpecifications"
                                                existing-entities="$ctrl.popup.existingEntities"
                                                command-processor="$ctrl.issueCommands">
        </waltz-flow-diagram-physical-flow-popup>
    </div>


    <!-- ANNOTATION POPUP -->
    <div class="wfde-pop waltz-fade-if"
         ng-if="$ctrl.visibility.annotationPopup">
        <waltz-flow-diagram-annotation-popup on-dismiss="$ctrl.onDismissPopup"
                                             annotation="$ctrl.popup.annotation"
                                             command-processor="$ctrl.issueCommands">
        </waltz-flow-diagram-annotation-popup>
    </div>


    <!-- EDITOR -->
    <div ng-class="{ 'wfde-dim' : $ctrl.visibility.anyPopup }">
        <waltz-flow-diagram context-menus="$ctrl.contextMenus">
        </waltz-flow-diagram>

        <div class="row">
            <div class="col-md-4">
                <button class="btn btn-success"
                        ng-click="$ctrl.doSave()">
                    Save
                </button>
                <pre ng-bind="$ctrl.saveResp | json"></pre>
            </div>
            <div class="col-md-4">
                <pre>{{ $ctrl.nodes | json }}</pre>
            </div>
            <div class="col-md-4">
            </div>
        </div>

    </div>
</div>
